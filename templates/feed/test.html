<div class="text-left">
         <span class="pointer">
            {% if request.user in page_obj.likes.users.all%}
            <!-- already liked-->
            <a href={% url 'requirement_comment_vote' comment_id=page_obj.pk opition='like' %}> <i
               data-toggle="tooltip" data-placement="bottom" title="Unlike"
               class="like fas fa-thumbs-up pr-2">
            <span>{{page_obj.get_total_likes}}</span>
            </i>
            </a>
            {% else %}
            <!--not liked-->
            <a href={% url 'requirement_comment_vote' comment_id=page_obj.pk opition='like' %}><i
               data-toggle="tooltip" data-placement="bottom" title="Like"
               class="default-icon fas fa-thumbs-up pr-2">
            <span>{% if page_obj.get_total_likes  %}{{page_obj.get_total_likes}} {% else %} 0
            {% endif %}</span></i>
            </a>
            {% endif %}
         </span>
         <span class="ml-3 pointer">
         {% if request.user in page_obj.dis_likes.users.all %}
         <a href={% url 'requirement_comment_vote' comment_id=page_obj.pk opition='dis_like' %}><i
            data-toggle="tooltip" data-placement="bottom" title="i dislike this"
            class="dislike fas fa-thumbs-down pr-2">
         <span>{{page_obj.get_total_dis_likes}}</span></i>
         </a>
         {% else %}
         <a href={% url 'requirement_comment_vote' comment_id=page_obj.pk opition='dis_like' %}><i
            data-toggle="tooltip" data-placement="bottom" title="i dislike this "
            class="default-icon fas fa-thumbs-down pr-2">
         <span>{% if  page_obj.get_total_dis_likes %}{{page_obj.get_total_dis_likes}}
         {% else %} 0 {% endif %}</span></i>
         </a>
         {% endif %}
         </span>
      </div>
      <p class="text-right">{{page_obj.user.first_name}} {{page_obj.user.last_name}}.
         {% if page_obj.user == request.user  %}
         <span><a class="circle-card" href="{% url 'requirement_comment_update' page_obj.id %}"><i class="fas fa-edit"></a></i></span>
         {% endif %}
      </p>
   </div>



 <div class="container-1-box ">
                                     <h3><span style='text-align: left;'>{{ topic.text }} </span> </h3>
                                     <hr style='width:1027px;'>
                                     <!-- <img src='{{ userprofile.picture.url }}' height=75 width=75 class='round'> -->
                                     <p style='color:purple;' class='creator'><b>{{feed.user.username}}</b></p>
                                     <ul>
                                       <li data-id="{{ like_obj.id }}" data-type="comment" data-action="like" title="Like">
                                          <span class="glyphicon glyphicon-thumbs-up"></span>
                                          <span data-count="like">{{ like_obj.rates.likes.count }}</span>
                                       </li>
                                       <li data-id="{{ like_obj.id }}" data-type="comment" data-action="dislike" title="Dislike">
                                          <span class="glyphicon glyphicon-thumbs-down"></span>
                                          <span data-count="dislike">{{ like_obj.rates.dislikes.count }}</span>
                                       </li>
                                     </ul>
                                    
                                </div>

<a class="btn btn-primary btn-sm rounded-pill"  href="{% url 'feed:edit_comment' pk=comment.pk %}">Edit</a>


{% extends 'base.html' %}


{% block content %}
 
 {% if user.is_authenticated %}
     <strong>{{ user.username }}</strong><br>
     <p>{{ comment.comment|slice:":300" }}</p>
      <!--Likes & Dislikes-->
      <div class="text-left">
         <span class="pointer">
          {% if request.user in like_obj.likes.users.all %}
         <!--Already liked-->
         <a class="like" href="{% url 'feed:comnt_like_toggle' pk=comment.pk %}" data-id="{{ comment.pk }}" data-type="comment">
            <i data-toggle="tooltip" data-placement="bottom" title="Like" class="like fas fa-thumbs-up pr-2" aria-hidden="true">
               <span data-count="like">{{ like_obj.rates.likes.counts }}</span>
            </i>
         </a>
       {% else %}
       <!--not liked-->
       <a class="like" href="{% url 'feed:comnt_like_toggle' pk=comment.pk %}" data-id="{{ comment.pk }}" data-type="comment">
         <i data-toggle="tooltip" data-placement="bottom" title="Like" class="like fas fa-thumbs-up pr-2" aria-hidden="true">
         <span data-count="like">{% if like_obj.rates.likes.counts %}{{ like_obj.rates.likes.counts }} {% else %} 0 {% endif %}</span>
          </i>
        </a>
       {% endif %}
      </span>
      <span class="pointer">
       {% if request.user in like_obj.dislikes.users.all %}
         <!--Already liked-->
        <a class="dislike" href="{% url 'feed:comnt_dislike_toggle' pk=comment.pk %}" data-id="{{ comment.pk }}" data-type="comment">
         <i data-toggle="tooltip" data-placement="bottom" title="i dislike this" class="dislike fas fa-thumbs-down pr-2" aria-hidden="true">
            <span data-count="dislike">{{ like_obj.rates.dislikes.counts }}</span>
          </i>
         </a>
       {% else %}
         <!--not liked-->
         <a class="dislike" href="{% url 'feed:comnt_dislike_toggle' pk=comment.pk %}" data-id="{{ comment.pk }}" data-type="comment">
            <i data-toggle="tooltip" data-placement="bottom" title="i dislike this" class="dislike fas fa-thumbs-down pr-2" aria-hidden="true">
             <span data-count="dislike">{% if like_obj.rates.dislikes.counts %}{{ like_obj.rates.dislikes.counts }} {% else %} 0 {% endif %}</span>
            </i>
         </a>
       {% endif %}
      </span>
      </div>
               <!-- End Likes & Dislikes-->
       <!-- protect data from other users-->
      <p>Read time: {% if instance.read_time <= 1 %} < 1 Minute {% else %}{{ instance.read_time }} minutes {% endif %}</p>
       <p class="text-right">{{like_obj.user.user_name}}.
        {% if like_obj.user == request.user  %}
        <span><a class="circle-card" href="{% url 'feed:edit_comment' pk=comment.pk like_obj.id %}"><i class="fas fa-edit"></a></i></span>
        {% endif %}
      </p>
    {% endif %}
    <hr style='width:600px;'>

{% endblock %}


<div class="card-body">
                              
                              <p>
                               
                                
                                 
                              </p>
                              {% for comment in feed.comments.all %}
                                 <div class="comments">
                                    <p class="font-weight-bold">
                                       <div class="date text-muted">{{ comment.created_on}}</div>
                                       {% if not comment.approved %}

                                        <a class="" href="{% url 'feed:comment_removed' pk=comment.pk %}">
                                     <i data-toggle="tooltip" data-placement="bottom" title="delete" class=" fas fa-trash-alt pr-2" aria-hidden="true"></i>
                                 </a>
                                        

                                        <a class="" href="{% url 'feed:comment_approved' pk=comment.pk %}">
                                          <i data-toggle="tooltip" data-placement="bottom" title="approve" class=" far fa-smile pr-2" aria-hidden="true"></i>
                                        </a>
                                             <p>{{ comment.content|slice:":300" }}</p>
                                       {% endif %}
                                    </p>
                                  <!-- Like section -->
                                 <div id="like-section">
                                    {% include 'partials/like_section.html' %}
                                 </div>
                                 </div>
                                 
                              {% empty %}
                                    <p>No comments here yet :(</p>
                              {% endfor %}
</div>

    {% if result %}
         <!--Already liked-->
         <a class="" href="{% url 'like' %}" id="like-btn" value='{{ comment.pk }}' data-type='comment'>
            <i data-toggle="tooltip" data-placement="bottom" title="Like" class="like fas fa-thumbs-up pr-2" aria-hidden="true">
               <span data-count="like">{{ get_total_likes }}</span>
            </i>
         </a>
       {% else %}
       <!--not liked-->
       <a class="" href="{% url 'like' %}" id="like-btn" value='{{ comment.pk }}' data-type='comment'>
         <i data-toggle="tooltip" data-placement="bottom" title="Like" class="like fas fa-thumbs-up pr-2" aria-hidden="true">
         <span data-count="like">{% if result %}{{ get_total_likes }} {% else %} 0 {% endif %}</span>
          </i>
        </a>
       {% endif %}
      </span>
      <span class="pointer">
       {% if result %}
         <!--Already liked-->
        <a class="" href="{% url 'like' %}" id="dislike-btn" value="{{ comment.pk }}" data-type="comment">
         <i data-toggle="tooltip" data-placement="bottom" title="i dislike this" class="dislike fas fa-thumbs-down pr-2" aria-hidden="true">
            <span data-count="dislike">{{ get_total_likes }}</span>
          </i>
         </a>
       {% else %}
         <!--not liked-->
         <a class="" href="{% url 'like' %}" id="dislike-btn" value="{{ comment.pk }}" data-type="comment">
            <i data-toggle="tooltip" data-placement="bottom" title="i dislike this" class="dislike fas fa-thumbs-down pr-2" aria-hidden="true">
             <span data-count="dislike">{% if result %}{{ get_total_likes }} {% else %} 0 {% endif %}</span>
            </i>
         </a>
       {% endif %}

 <p class="text-right">{{request.user.user_name}}.
        {% if user == request.user  %}
        <span><a class="circle-card" href="{% url 'feed:edit_comment' pk=comment.id %}"><i class="fas fa-edit"></a></i></span>
        {% endif %}
      </p>


    {{ total_likes }} Like{{ total_likes|pluralize }}
      <div class="text-left">
         <span class="pointer">
            {% if request.user.is_authenticated %}
            <form action="{% url 'like_comment' %}" method="post">
               {% csrf_token %}
               {% if is_liked %}
               <button type="submit" class="" href="" id="like" name="comment_id" value="{{ comment.id }}" data-type="">
                  <i data-toggle="tooltip" title="Like" class="like fas fa-thumbs-up pr-2" aria-hidden="true">
                     <!-- <span data-count="like"></span> -->
                  </i>
               </button>
               {% else %}
               <button type="submit" class="" href="" id="like" name="comment_id" value="{{ comment.id }}" data-type="">
                  <i data-toggle="tooltip" title="Like" class="like fas fa-thumbs-up pr-2" aria-hidden="true">
                    <!--  <span data-count="like"></span> -->
                  </i>
               </button>
               {% endif %}
            </form>
            {% endif %}
      </span>
      </div>


/**
Configuring AJAX to use the CSRF token
**/
// Getting a cookie by name
function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
 
// Setup AJAX
$(function () {
    $.ajaxSetup({
        headers: { "X-CSRFToken": getCookie("csrftoken") }
    });
});



          {% ifequal owner user %}
        <a href="/user/editprofile/" class="btn btn-block btn-primary">Edit Your Profile</a>
              <a href="/movie/add/" class="btn btn-block btn-primary">Add A Movie</a>
          {% else %}    
            {% if user.is_authenticated %}
          {% if owner_profile|has_relationship:user %}
            <p class="alert alert-success">You are friends</p>
          {% else %}
            {% ifequal owner_profile|has_request:user 'no request' %}
              {% ifnotequal owner user %}
                <a href="javascript:void(0);" id="send_request_from{{ user.id }}_to{{ owner.id }}" class="js-sendRequest btn btn-block btn-primary">Add as friend</a>
              {% endifnotequal %}
            {% else %}
              {% ifequal owner_profile|has_request:user 'sent request' %}
                <p class="alert alert-success">Already sent request!</p>
              {% else %}
                <p class="alert">Received request.</p>
              {% endifequal %}
            {% endifequal %}
          {% endif %}
        {% endif %}
            {% endifequal %}

        {% if request.user|has_relationship:user %}
              <p class="alert alert-success">Friend</p>
             {% endif %}
               {% if request.user|has_request:user and 'no request' %}
                {% if request.user != user %}
                  <a href="javascript:void(0);" id="send_request_from{{ user.id }}_to{{ owner.id }}" class="js-sendRequest btn btn-block btn-sm rounded-pill">+Friend</a>
                {% endif %}
               {% elif request.user|has_request:user and 'sent request' %}
                   <p class="alert alert-success">Request already sent!</p>
               {% else %}
                     <p class="alert">Received request.</p>
               {% endif %}
               {% endif %}

  <!-- <li class="nav-item mr-3"><span class="navbar-text">Hello, {{ user.username }}.</span></li> -->
   <li class="nav-item mr-3">
                    <a href="javascript:{document.getElementById('logout').submit()}" class="nav-link">
                    <i class="fas fa-sign-out-alt"></i> LOGOUT
                    </a>
                    <form action="{% url 'accounts:logout' %}" method="POST" id="logout">
                     {% csrf_token %}
                     <input type="hidden">
                    </form>
</li>
 <li role="separator" class="divider"></li>